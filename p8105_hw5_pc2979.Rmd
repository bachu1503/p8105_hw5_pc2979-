---
title: "HW5"
output:   
  github_document
---

### Load packages
```{r, message = FALSE, warning = FALSE}
library(tidyverse)
library(rvest)
```

## Question 1

Import data by listing out all path names and using `map` to grab observations for each path.
```{r, message = FALSE}
df <-
  tibble(
    files = list.files("data"),
    path = str_c("data/", files)
  ) %>%
  mutate(data = map(path, read_csv)) %>%
  unnest()
```

Clean data
```{r}
tidydf <- 
  df %>% 
  mutate(
    files = str_replace(files, ".csv", ""),
    group = str_sub(files, 1, 3)) %>% 
  pivot_longer(
    week_1:week_8,
    names_to = "week",
    values_to = "outcome",
    names_prefix = "week_") %>% 
  mutate(week = as.numeric(week)) %>% 
  select(group, subject = files, week, outcome)
```

Plot data showing observations of each subject over time
```{r}
tidydf %>%
  ggplot(aes(x = week, y = outcome, color = group, group = subject)) +
  geom_point() +
  geom_path() + 
  facet_grid(~group)
```
The graph suggests that outcomes are highly correlated within each group - the outcome of those in the experimental arm are more likely to trend upward over time while the outcome of those in the control arm vary over time. 

## Question 2

Import homicide data from Washington Post github
```{r}
post <- read_csv("https://raw.github.com/washingtonpost/data-homicides/master/homicide-data.csv")
```
There are `r nrow(post)` observations and `r ncol(post)` variables in the `post` dataset. Each row is a single reported homicide by reported date, victim's name, race, and age, reported city and state, latitude and longitude of report, and status of the case. 

A total of `r post %>% select(uid) %>% distinct %>% count` cases across `r post %>% select(state) %>% distinct() %>% count()` states in `r post %>% select(city) %>% distinct() %>% count()` cities are found in the dataset.

```{r}

```



